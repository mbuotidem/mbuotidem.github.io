<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="base" content="https://misaac.me">

    
    <title>Isaac on DevSecOps • The Secret Problem Isn’t Secrets – It's Identity</title>

    
    
    

    
    

    
    
    
        <link rel="stylesheet" href="https://misaac.me/inter_subset_en.css?h=d8cf4ad058d6c3a4015b">
    

    
        <link rel="stylesheet" href="https://misaac.me/main.css?h=f8b119c70beffb77ac87" />

    <meta name="color-scheme" content="light dark" />
        <meta name="description" content="Use spiffe&#x2F;spire as the one source of truth for identity across your cloud, clusters, laptops, and runtime services" />
        <meta property="og:description" content="Use spiffe&#x2F;spire as the one source of truth for identity across your cloud, clusters, laptops, and runtime services" />

    
        <meta name="robots" content="index, nofollow" />
    

    <meta property="og:title" content="The Secret Problem Isn’t Secrets – It's Identity" />
    <meta property="og:type" content="article" />

    
<meta property="og:locale" content="en_GB" />

    <meta property="og:url" content="https:&#x2F;&#x2F;misaac.me&#x2F;blog&#x2F;spiffe-spire-secret-sprawl-fix&#x2F;" /><meta property="og:site_name" content="Isaac on DevSecOps"><meta http-equiv="Content-Security-Policy"
content="default-src 'self';font-src &#x27;self&#x27; data:;img-src &#x27;self&#x27; https:&#x2F;&#x2F;* data:;media-src &#x27;self&#x27;;style-src &#x27;self&#x27; https:&#x2F;&#x2F;emgithub.com &#x27;unsafe-inline&#x27; https:&#x2F;&#x2F;emgithub.misaac.me &#x27;unsafe-inline&#x27; https:&#x2F;&#x2F;gist.github.com &#x27;unsafe-inline&#x27; https:&#x2F;&#x2F;github.githubassets.com &#x27;unsafe-inline&#x27;;frame-src player.vimeo.com https:&#x2F;&#x2F;www.youtube-nocookie.com https:&#x2F;&#x2F;emgithub.com https:&#x2F;&#x2F;emgithub.misaac.me;connect-src 'self';script-src 'self' 'self' https://gist.github.com">

        <noscript><link rel="stylesheet" href="https://misaac.me/no_js.css"/></noscript>
        <script type="text/javascript" src="https://misaac.me/js/initializeTheme.min.js"></script>
        <script defer src="https://misaac.me/js/themeSwitcher.min.js"></script></head>


<body class="use-sans-serif">
    <header>
    <nav class="navbar">
        <div class="nav-title">
            <a class="home-title" href="https://misaac.me">Isaac on DevSecOps</a>
        </div>
            <div class="nav-navs">
                <ul>
                        
                            <li>
                                
                                
                                    <a class="nav-links no-hover-padding" href="https://misaac.me/blog/">
                                
                                blog
                                </a>
                            </li>
                        
                            <li>
                                
                                
                                    <a class="nav-links no-hover-padding" href="https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;miisaac&#x2F;" target="_blank" rel="noopener noreferrer">
                                
                                linkedin
                                </a>
                            </li>
                        
                            <li>
                                
                                
                                    <a class="nav-links no-hover-padding" href="https:&#x2F;&#x2F;github.com&#x2F;mbuotidem&#x2F;" target="_blank" rel="noopener noreferrer">
                                
                                github
                                </a>
                            </li>
                        
                            <li>
                                
                                
                                    <a class="nav-links no-hover-padding" href="https://misaac.me/tags/">
                                
                                tags
                                </a>
                            </li>
                        <div class="nav-navs" id="menu-icons-group">
                        

                        
                        

                        <li class="theme-switcher-wrapper js"><div
        title="Toggle dark&#x2F;light mode"
        class="theme-switcher"
        tabindex="0"
        role="button"
        aria-label="Toggle dark mode"
        aria-pressed="false">
    </div><div
        title="Reset mode to default"
        class="theme-resetter arrow"
        tabindex="0"
        role="button"
        aria-hidden="true"
        aria-label="Reset mode to default">
    </div>

</li>
</div>
                </ul>
            </div>
        
    </nav>
</header>

    <div class="content">

        
        




<main>
    <article>
        <h1 class="article-title">
            The Secret Problem Isn’t Secrets – It&#x27;s Identity
        </h1>

        <ul class="meta">
                <li>7th May 2025</li>
                <li title="907 words"><span class='separator' aria-hidden='true'>•</span>5 min read</li><li class="tag"><span class='separator' aria-hidden='true'>•</span>Tags:&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/spiffe-spire/">spiffe&#x2F;spire</a>,&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/identity/">identity</a>,&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/secrets-management/">secrets management</a>,&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/zero-trust/">zero trust</a>,&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/aws/">aws</a></li>
        </ul>

        <section class="body"><h3 id="preamble"><a class="header-anchor no-hover-padding" href="#preamble" aria-label="Anchor link for: preamble"><span class="link-icon" aria-hidden="true"></span></a>
Preamble</h3>
<p>I recently stumbled across <a href="https://spiffe.io/">SPIFFE/SPIRE</a>, and the more I read about it, the more its core idea resonated with me. Most organizations suffer from secret sprawl: IAM credentials for cloud workloads, SSH keys for devs, .env files passed around in Slack, or API keys hardcoded into CI jobs. Revocation is a nightmare, auditing is incomplete, and breaches become treasure hunts for whatever got copied where.</p>
<p>A unified identity system spanning all my workloads, from developer machines to production services, would simplify my life as a security engineer.</p>
<h3 id="how-spiffe-spire-solves-secret-sprawl"><a class="header-anchor no-hover-padding" href="#how-spiffe-spire-solves-secret-sprawl" aria-label="Anchor link for: how-spiffe-spire-solves-secret-sprawl"><span class="link-icon" aria-hidden="true"></span></a>
How SPIFFE/SPIRE Solves Secret Sprawl</h3>
<p>SPIFFE gives every workload its own digital passport: a short-lived X.509 certificate called an <a href="https://spiffe.io/docs/latest/spiffe-about/spiffe-concepts/#spiffe-verifiable-identity-document-svid">SVID</a>, automatically issued by SPIRE or another compatible system. This certificate identifies the workload with a <a href="https://spiffe.io/docs/latest/spiffe-about/spiffe-concepts/#spiffe-id">SPIFFE ID</a> (e.g. <code>spiffe://example.org/web/frontend</code>), lets the service prove who it is without dragging around long-lived secrets, expires quickly, and is rotated frequently so it's hard to steal or misuse.</p>
<p>But why would I need this if I already have a secrets manager? Because most secrets managers assume you’ve already solved identity. Vault wants a token. AWS Secrets Manager needs IAM credentials. But where do those come from in the first place? That’s the <a href="https://spiffe.io/docs/latest/spire-about/comparisons/">secret zero problem</a>.</p>
<p>With the certificate, that identity becomes the key to everything else. Inside your infra, you can often drop secrets entirely. Services use mutual TLS to prove who they are, and authorization logic decides what they can do. When secrets are still needed, for example for third-party APIs, the certificate gates access. Workloads authenticate to your secrets manager using their certificate and only get the secret they’re authorized for.</p>
<h3 id="how-it-works"><a class="header-anchor no-hover-padding" href="#how-it-works" aria-label="Anchor link for: how-it-works"><span class="link-icon" aria-hidden="true"></span></a>
How It Works</h3>
<p>A SPIFFE-enabled system fetches secrets securely on demand. The flow looks something like this:</p>
<p><img src="https://misaac.me/blog/spiffe-spire-secret-sprawl-fix/diagram.svg" alt="Image showing how SPIFFE/SPIRE works - Different workload types obtain a certificate from the Spire Server via the Spire Agent which performs attestation" /></p>
<ol>
<li>
<p><strong><a href="https://spiffe.io/docs/latest/spire-about/spire-concepts/#attestation">Attestation</a>:</strong>
The SPIRE Agent first attests to the SPIRE Server through Node Attestation, proving the machine it's running on is trusted. This is done using cloud identity documents such as AWS instance identity. After the Server attests the node with out-of-band checks, the SPIRE Agent performs Workload Attestation, verifying the identity of workloads using markers like Kubernetes metadata or process runtime attributes.</p>
</li>
<li>
<p><strong><a href="https://spiffe.io/docs/latest/spire-about/spire-concepts/#a-day-in-the-life-of-an-svid">SVID Issuance</a>:</strong>
If the attestation checks out, the SPIRE Server issues a short-lived X.509-SVID, bound to a SPIFFE ID, which the SPIRE Agent then delivers to the workload.</p>
</li>
<li>
<p><strong><a href="https://spiffe.io/docs/latest/keyless/vault/readme/">Secret Fetching</a>:</strong>
The workload uses its SVID to authenticate to a secrets manager, fetching the secrets it needs without ever storing credentials locally.</p>
</li>
</ol>
<h3 id="the-key-takeaway-identity-comes-first-secrets-come-second"><a class="header-anchor no-hover-padding" href="#the-key-takeaway-identity-comes-first-secrets-come-second" aria-label="Anchor link for: the-key-takeaway-identity-comes-first-secrets-come-second"><span class="link-icon" aria-hidden="true"></span></a>
The Key Takeaway: Identity Comes First. Secrets Come Second.</h3>
<p>While SPIFFE/SPIRE doesn’t magically eliminate secrets, it changes how we think about access. Instead of relying on possession of a token or API key, workloads prove their identity. That verified identity becomes the basis for gated, auditable access. You stop <strong>distributing secrets</strong> and <strong>start issuing trust</strong>. SPIFFE handles the identity while your app logic or <a href="https://spiffe.io/docs/latest/microservices/envoy-opa/readme/">policy engine</a> decides what that identity is authorized to do.</p>
<p>Does this fix everything? Of course not. You'll likely need to use a <a href="https://github.com/spiffe/spiffe-helper">sidecar</a> for your legacy apps, or build an <a href="https://www.uber.com/blog/our-journey-adopting-spiffe-spire/">auth library</a> that abstracts the complexity of SVID retrieval and usage so your devs can focus on business logic. And if your team is still uploading .env files to Slack, you'll need to perform a culture overhaul on your way to secrets nirvana.</p>
<p>And yes, all the SPIRE components represent another piece of infra to manage. You’ll have to think about SPIRE agent health, the SPIRE server DB/read replica health, and all the usual operational stuff. In return however, you'll gain observability, revocation, and a verifiable audit trail.</p>
<h3 id="what-this-series-covers"><a class="header-anchor no-hover-padding" href="#what-this-series-covers" aria-label="Anchor link for: what-this-series-covers"><span class="link-icon" aria-hidden="true"></span></a>
What this series covers</h3>
<p>I’ll walk through setting up SPIRE on AWS and using it as the single source of identity for everything from dev machines to EKS workloads.</p>
<p>This won’t cover HA deployments, multi-region SPIRE, or plugging into enterprise PKI. But it’ll go over the basics and you can swap out the toy pieces for enterprise-grade alternatives that meet your security posture.</p>
<p>If you’ve ever wished for one source of truth for identity across your cloud, clusters, laptops, and runtime services — keep reading.</p>
<hr />
<p><strong>Part 1:</strong> <a href="https://misaac.me/blog/grant-aws-access-to-codespaces-via-spiffe-spire-iam-roles-anywhere/">Grant AWS Access to GitHub Codespaces via SPIFFE/SPIRE &amp; IAM Roles Anywhere</a></p>
<p><strong>Part 2:</strong> <a href="https://misaac.me/blog/connecting-github-codespaces-to-aws-vpn-via-spiffe-spire-and-iam-roles-anywhere/">Connecting GitHub Codespaces to AWS VPN via SPIFFE/SPIRE &amp; IAM Roles Anywhere</a></p>
<p><strong>Part 3:</strong> <a href="https://misaac.me/blog/automated-aws-credential-renewal-spiffe-helper-roles-anywhere/">Automated AWS Credential Renewal Using SPIFFE Helper and IAM Roles Anywhere</a></p>
<p><strong>Part 4:</strong> <a href="https://misaac.me/blog/grant-aws-access-to-kubernetes-workloads-via-spiffe-spire-and-iam-roles-anywhere/">Grant AWS Access to Kubernetes Workloads via SPIFFE/SPIRE &amp; IAM Roles Anywhere</a></p>

        </section>

        
                
                
                    
                        
                        
                        
                    
                    
                        
                        
                        
                    
                
                
            <nav class="full-width article-navigation">
                <div><a href="https://misaac.me/blog/grant-aws-access-to-codespaces-via-spiffe-spire-iam-roles-anywhere/" aria-label="Next" aria-describedby="left_title"><span class="arrow">←</span>&nbsp;Next</a>
                <p aria-hidden="true" id="left_title">Grant AWS Access to GitHub Codespaces via SPIFFE&#x2F;SPIRE &amp; IAM Roles Anywhere</p></div>
                <div><a href="https://misaac.me/blog/aws-client-vpn-terraform/" aria-label="Prev" aria-describedby="right_title">Prev&nbsp;<span class="arrow">→</span></a>
                <p aria-hidden="true" id="right_title">Creating an AWS Client VPN with Terraform and Serverless CA</p></div>
            </nav>
        
        

        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
        

    </article>
</main>

    <div id="button-container">
        
        
            <div id="toc-floating-container">
                <input type="checkbox" id="toc-toggle" class="toggle"/>
                <label for="toc-toggle" class="overlay"></label>
                <label for="toc-toggle" id="toc-button" class="button" title="Toggle Table of Contents">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg>
                </label>
                <div class="toc-content">
                    

<div class="toc-container">
    

    <ul>
        
            
            
                <li><a href="https://misaac.me/blog/spiffe-spire-secret-sprawl-fix/#preamble">Preamble</a>
                    
                </li>
            
        
            
            
                <li><a href="https://misaac.me/blog/spiffe-spire-secret-sprawl-fix/#how-spiffe-spire-solves-secret-sprawl">How SPIFFE&#x2F;SPIRE Solves Secret Sprawl</a>
                    
                </li>
            
        
            
            
                <li><a href="https://misaac.me/blog/spiffe-spire-secret-sprawl-fix/#how-it-works">How It Works</a>
                    
                </li>
            
        
            
            
                <li><a href="https://misaac.me/blog/spiffe-spire-secret-sprawl-fix/#the-key-takeaway-identity-comes-first-secrets-come-second">The Key Takeaway: Identity Comes First. Secrets Come Second.</a>
                    
                </li>
            
        
            
            
                <li><a href="https://misaac.me/blog/spiffe-spire-secret-sprawl-fix/#what-this-series-covers">What this series covers</a>
                    
                </li>
            
        
    </ul>
</div>


                </div>
            </div>
        

        
        

        
        <a href="#" id="top-button" class="no-hover-padding" title="Go to the top of the page">
            <svg viewBox="0 0 20 20" fill="currentColor"><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg>
        </a>
    </div>


<span id="copy-success" class="hidden">
        Copied!
    </span>
    <span id="copy-init" class="hidden">
        Copy code to clipboard
    </span>
    <script defer src="https://misaac.me/js/copyCodeToClipboard.min.js"></script>
    </div>
    <footer>
    <section>
        <nav class="socials nav-navs">
        </nav>

        
        <nav class="nav-navs">
        </nav>

        <div class="credits">
            <small>
                
    
    
    
    
        
    
        
    

    

    
    
    

    
    
    <p><p>© 2025 Isaac M • Except where otherwise noted , content on this site is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> license.</p>
</p>

                </small>
        </div>
    </section>

    </footer>

</body>

</html>
