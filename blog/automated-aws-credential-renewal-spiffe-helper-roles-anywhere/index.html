<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="base" content="https://misaac.me">

    
    <title>Isaac on DevSecOps • Automated AWS Credential Renewal Using SPIFFE Helper and IAM Roles Anywhere</title>

    
    
    

    
    

    
    
    
        <link rel="stylesheet" href="https://misaac.me/inter_subset_en.css?h=d8cf4ad058d6c3a4015b">
    

    
        <link rel="stylesheet" href="https://misaac.me/main.css?h=f8b119c70beffb77ac87" />

    <meta name="color-scheme" content="light dark" />
        <meta name="description" content="Learn how to combine SPIFFE Helper&#x27;s SVID management with IAM Roles Anywhere&#x27;s credential helper to achieve automated AWS credential renewal" />
        <meta property="og:description" content="Learn how to combine SPIFFE Helper&#x27;s SVID management with IAM Roles Anywhere&#x27;s credential helper to achieve automated AWS credential renewal" />

    
        <meta name="robots" content="index, nofollow" />
    

    <meta property="og:title" content="Automated AWS Credential Renewal Using SPIFFE Helper and IAM Roles Anywhere" />
    <meta property="og:type" content="article" />

    
<meta property="og:locale" content="en_GB" />

    <meta property="og:url" content="https:&#x2F;&#x2F;misaac.me&#x2F;blog&#x2F;automated-aws-credential-renewal-spiffe-helper-roles-anywhere&#x2F;" /><meta property="og:site_name" content="Isaac on DevSecOps"><meta http-equiv="Content-Security-Policy"
content="default-src 'self';font-src &#x27;self&#x27; data:;img-src &#x27;self&#x27; https:&#x2F;&#x2F;* data:;media-src &#x27;self&#x27;;style-src &#x27;self&#x27; https:&#x2F;&#x2F;emgithub.com &#x27;unsafe-inline&#x27; https:&#x2F;&#x2F;emgithub.misaac.me &#x27;unsafe-inline&#x27; https:&#x2F;&#x2F;gist.github.com &#x27;unsafe-inline&#x27; https:&#x2F;&#x2F;github.githubassets.com &#x27;unsafe-inline&#x27;;frame-src player.vimeo.com https:&#x2F;&#x2F;www.youtube-nocookie.com https:&#x2F;&#x2F;emgithub.com https:&#x2F;&#x2F;emgithub.misaac.me;connect-src 'self';script-src 'self' 'self' https://gist.github.com">

        <noscript><link rel="stylesheet" href="https://misaac.me/no_js.css"/></noscript>
        <script type="text/javascript" src="https://misaac.me/js/initializeTheme.min.js"></script>
        <script defer src="https://misaac.me/js/themeSwitcher.min.js"></script></head>


<body class="use-sans-serif">
    <header>
    <nav class="navbar">
        <div class="nav-title">
            <a class="home-title" href="https://misaac.me">Isaac on DevSecOps</a>
        </div>
            <div class="nav-navs">
                <ul>
                        
                            <li>
                                
                                
                                    <a class="nav-links no-hover-padding" href="https://misaac.me/blog/">
                                
                                blog
                                </a>
                            </li>
                        
                            <li>
                                
                                
                                    <a class="nav-links no-hover-padding" href="https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;miisaac&#x2F;" target="_blank" rel="noopener noreferrer">
                                
                                linkedin
                                </a>
                            </li>
                        
                            <li>
                                
                                
                                    <a class="nav-links no-hover-padding" href="https:&#x2F;&#x2F;github.com&#x2F;mbuotidem&#x2F;" target="_blank" rel="noopener noreferrer">
                                
                                github
                                </a>
                            </li>
                        
                            <li>
                                
                                
                                    <a class="nav-links no-hover-padding" href="https://misaac.me/tags/">
                                
                                tags
                                </a>
                            </li>
                        <div class="nav-navs" id="menu-icons-group">
                        

                        
                        

                        <li class="theme-switcher-wrapper js"><div
        title="Toggle dark&#x2F;light mode"
        class="theme-switcher"
        tabindex="0"
        role="button"
        aria-label="Toggle dark mode"
        aria-pressed="false">
    </div><div
        title="Reset mode to default"
        class="theme-resetter arrow"
        tabindex="0"
        role="button"
        aria-hidden="true"
        aria-label="Reset mode to default">
    </div>

</li>
</div>
                </ul>
            </div>
        
    </nav>
</header>

    <div class="content">

        
        




<main>
    <article>
        <h1 class="article-title">
            Automated AWS Credential Renewal Using SPIFFE Helper and IAM Roles Anywhere
        </h1>

        <ul class="meta">
                <li>24th May 2025</li>
                <li title="612 words"><span class='separator' aria-hidden='true'>•</span>4 min read</li><li class="tag"><span class='separator' aria-hidden='true'>•</span>Tags:&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/spiffe-spire/">spiffe&#x2F;spire</a>,&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/identity/">identity</a>,&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/secrets-management/">secrets management</a>,&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/zero-trust/">zero trust</a>,&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/aws/">aws</a>,&nbsp;</li><li class="tag"><a href="https://misaac.me/tags/iam/">iam</a></li>
        </ul>

        <section class="body"><p>In <a href="http://127.0.0.1:1111/blog/grant-aws-access-to-codespaces-via-spiffe-spire-iam-roles-anywhere/#use-a-spiffe-svid-to-obtain-aws-credentials-via-iam-roles-anywhere">Grant AWS Access to GitHub Codespaces via SPIFFE/SPIRE &amp; IAM Roles Anywhere</a>, we demonstrated how to authenticate to AWS using SPIRE-issued X.509 certificates and IAM Roles Anywhere.</p>
<p>While it works, this approach requires manual intervention: you need to repeatedly request new SVIDs when they expire after an hour, as well as manually call the Roles Anywhere credential helper each time to obtain AWS credentials. But what if we could automate this entire process?</p>
<p>Enter <a href="https://github.com/spiffe/spiffe-helper">spiffe-helper</a>. It takes care of fetching X.509 SVID certificates from the SPIFFE agent, launching a process to use them, and automatically renewing and reloading certificates as needed. Let's combine these two to good use.</p>
<p>We'll use the <code>serve</code> command of the rolesanywhere credential helper which vends temporary security credentials from IAM Roles Anywhere through a local endpoint. We'll invoke this via spiffe-helper and if all goes to plan, never need to lift a finger.</p>
<h3 id="set-up-the-aws-rolesanywhere-credential-helper"><a class="header-anchor no-hover-padding" href="#set-up-the-aws-rolesanywhere-credential-helper" aria-label="Anchor link for: set-up-the-aws-rolesanywhere-credential-helper"><span class="link-icon" aria-hidden="true"></span></a>
Set up the aws rolesanywhere credential helper</h3>
<p>You can download the roles anywhere credential helper from the AWS docs page <a href="https://docs.aws.amazon.com/rolesanywhere/latest/userguide/credential-helper.html">here</a> but if you encounter issues running the executable like I did, you could also just build from source.</p>
<ol>
<li>
<p>Clone the repo</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> clone https://github.com/aws/rolesanywhere-credential-helper.git</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> rolesanywhere-credential-helper </span>
</span></code></pre>
</li>
<li>
<p>Follow the instructions in the <a href="https://github.com/aws/rolesanywhere-credential-helper/tree/main?tab=readme-ov-file#dependencies">readme</a> to download the build dependencies for your OS. Basically, you need <code>git</code>, <code>gcc</code>, <code>GNU make</code>, and <code>golang</code>.</p>
</li>
<li>
<p>Build the executable</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">make</span></span><span class="z-meta z-function-call z-arguments z-shell"> release</span>
</span></code></pre>
</li>
<li>
<p>Copy the executable and test it by running the help menu</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cp</span></span><span class="z-meta z-function-call z-arguments z-shell"> build/bin/aws_signing_helper <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>/aws_signing_helper</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">./aws_signing_helper</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>h</span></span>
</span></code></pre>
<p>You should see :</p>
<pre class="z-code"><code><span class="z-text z-plain">$ ~/aws_signing_helper -h
</span><span class="z-text z-plain">A tool that utilizes certificates and their associated private keys to 
</span><span class="z-text z-plain">sign requests to AWS IAM Roles Anywhere&#39;s CreateSession API and retrieve temporary 
</span><span class="z-text z-plain">AWS security credentials. This tool exposes multiple commands to make credential 
</span><span class="z-text z-plain">retrieval and rotation more convenient.
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">Usage:
</span><span class="z-text z-plain">aws_signing_helper [command] [flags]
</span><span class="z-text z-plain">aws_signing_helper [command]
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">Available Commands:
</span><span class="z-text z-plain">completion            Generate the autocompletion script for the specified shell
</span><span class="z-text z-plain">credential-process    Retrieve AWS credentials in the appropriate format for external credential processes
</span><span class="z-text z-plain">help                  Help about any command
</span><span class="z-text z-plain">read-certificate-data Diagnostic command to read certificate data
</span><span class="z-text z-plain">serve                 Serve AWS credentials through a local endpoint
</span><span class="z-text z-plain">sign-string           Signs a fixed string using the passed-in private key (or reference to private key)
</span><span class="z-text z-plain">update                Updates a profile in the AWS credentials file with new AWS credentials
</span><span class="z-text z-plain">version               Prints the version number of the credential helper
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">Flags:
</span><span class="z-text z-plain">-h, --help   help for aws_signing_helper
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">Use &quot;aws_signing_helper [command] --help&quot; for more information about a command.
</span></code></pre>
</li>
</ol>
<br>
<h3 id="set-up-spiffe-helper"><a class="header-anchor no-hover-padding" href="#set-up-spiffe-helper" aria-label="Anchor link for: set-up-spiffe-helper"><span class="link-icon" aria-hidden="true"></span></a>
Set up spiffe-helper</h3>
<p>If you're on a linux machine, you're in luck - you can just grab the binaries from the <a href="https://github.com/spiffe/spiffe-helper/releases">releases page</a> and move on to the next section. The rest of us have to build it ourselves, but since its a <code>go</code> project, this is pretty straightforward.</p>
<ol>
<li>
<p>Clone the repo</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> clone https://github.com/spiffe/spiffe-helper.git</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> spiffe-helper</span>
</span></code></pre>
</li>
<li>
<p>Build the executable</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">go</span></span><span class="z-meta z-function-call z-arguments z-shell"> build<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> spiffe-helper cmd/spiffe-helper/main.go</span>
</span></code></pre>
</li>
<li>
<p>Test the executable by running the help menu</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">./spiffe-helper</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>h</span></span>
</span></code></pre>
<p>You should see :</p>
<pre class="z-code"><code><span class="z-text z-plain">$ ./spiffe-helper -h
</span><span class="z-text z-plain">Usage of ./spiffe-helper:
</span><span class="z-text z-plain">-config string
</span><span class="z-text z-plain">        &lt;configFile&gt; Configuration file path (default &quot;helper.conf&quot;)
</span><span class="z-text z-plain">-daemon-mode
</span><span class="z-text z-plain">        Toggle running as a daemon 
</span></code></pre>
</li>
<li>
<p>Configure SPIFFE Helper</p>
<p>The repository includes a <code>helper.conf</code> configuration file that needs customization. Make these essential changes:</p>
<ul>
<li>Set the command to be executed (<code>cmd</code>)</li>
<li>Specify the command arguments (<code>cmd_args</code>)</li>
<li>Enable <code>add_intermediates_to_bundle</code> by setting it to <code>true</code></li>
</ul>
<p>The last setting is particularly important - it ensures the SPIRE intermediate CA certificate is included in the bundle file after the Root CA certificate. Without this, you'll encounter an <code>AccessDeniedException: Untrusted signing certificate</code> error when trying to authenticate.</p>
<pre data-lang="conf" class="language-conf z-code"><code class="language-conf" data-lang="conf"><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">agent_address</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;/tmp/spire-agent/public/api.sock&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">cmd</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;~/aws_signing_helper&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">cmd_args</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;serve --certificate /tmp/svid.0.pem --private-key /tmp/svid.0.key --intermediates /tmp/bundle.0.pem --trust-anchor-arn arn:aws:rolesanywhere:us-east-1:012345678901:trust-anchor/9f455be1-f25f-495b-9e99-f6a630d62cbb --profile-arn arn:aws:rolesanywhere:us-east-1:012345678901:profile/737869f1-ffd0-4674-ac2b-f3d6895b4499 --role-arn arn:aws:iam::012345678901:role/test&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">cert_dir</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;/tmp&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">renew_signal</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;SIGUSR1&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">svid_file_name</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;svid.0.pem&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">svid_key_file_name</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;svid.0.key&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">svid_bundle_file_name</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;bundle.0.pem&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-comment z-genconfig"><span class="z-comment z-line z-number-sign z-genconfig"># Add CA with intermediates into Bundle file instead of SVID file,
</span></span></span><span class="z-source z-genconfig"><span class="z-meta z-comment z-genconfig"><span class="z-comment z-line z-number-sign z-genconfig"># it is the expected behavior in some scenarios like MySQL.
</span></span></span><span class="z-source z-genconfig"><span class="z-meta z-comment z-genconfig"><span class="z-comment z-line z-number-sign z-genconfig"># Default: false
</span></span></span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">add_intermediates_to_bundle</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-constant z-language z-genconfig">true</span>
</span></code></pre>
</li>
<li>
<p>Run the helper</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">./spiffe-helper</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>config</span> helper.conf</span>
</span></code></pre>
<p>You should see the following:</p>
<pre class="z-code"><code><span class="z-text z-plain">$ ./spiffe-helper -config helper.conf
</span><span class="z-text z-plain">INFO[0000] Using configuration file: &quot;helper.conf&quot;       system=spiffe-helper
</span><span class="z-text z-plain">INFO[0000] Launching daemon                              system=spiffe-helper
</span><span class="z-text z-plain">INFO[0000] Watching for X509 Context                     system=spiffe-helper
</span><span class="z-text z-plain">INFO[0000] Received update                               spiffe_id=&quot;spiffe://misaac.me/myservice&quot; system=spiffe-helper
</span><span class="z-text z-plain">INFO[0000] X.509 certificates updated                    system=spiffe-helper
</span><span class="z-text z-plain">2025/05/24 09:19:18 Local server started on port: 9911
</span><span class="z-text z-plain">2025/05/24 09:19:18 Make it available to the sdk by running:
</span><span class="z-text z-plain">2025/05/24 09:19:18 export AWS_EC2_METADATA_SERVICE_ENDPOINT=http://127.0.0.1:9911/
</span></code></pre>
</li>
</ol>
<br>
<h3 id="profit"><a class="header-anchor no-hover-padding" href="#profit" aria-label="Anchor link for: profit"><span class="link-icon" aria-hidden="true"></span></a>
Profit</h3>
<p>The final steps are simple. Open a terminal and set the <code>AWS_EC2_METADATA_SERVICE_ENDPOINT</code> environment variable to point to your local endpoint:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-storage z-modifier z-shell">export</span> <span class="z-variable z-other z-readwrite z-assignment z-shell">AWS_EC2_METADATA_SERVICE_ENDPOINT</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">http://127.0.0.1:9911</span></span>
</span></code></pre>
<p>Then delete any existing credentials:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rm</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>rf</span> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>/.aws/cli/cache/<span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span>    </span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rm</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>rf</span> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>/.aws/sso/cache/<span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span>             </span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mv</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>/.aws/config aws-config-backup</span>
</span><span class="z-source z-shell z-bash">
</span></code></pre>
<p>Now, simply run your application or any AWS CLI command as usual. The AWS SDKs and CLI will automatically detect the <code>AWS_EC2_METADATA_SERVICE_ENDPOINT</code> environment variable and fetch credentials from the local endpoint provided by the credential helper. No changes to your application code are required—credential renewal and retrieval are handled transparently in the background.</p>
<p>Let's run <code>whoami</code>.</p>
<pre class="z-code"><code><span class="z-text z-plain">$ aws sts get-caller-identity
</span><span class="z-text z-plain">{
</span><span class="z-text z-plain">    &quot;UserId&quot;: &quot;AROADBQP57FF2AEXAMPLE:30a7fe7d714958787f6075c9904ce642&quot;,
</span><span class="z-text z-plain">    &quot;Account&quot;: &quot;012345678901&quot;,
</span><span class="z-text z-plain">    &quot;Arn&quot;: &quot;arn:aws:sts::012345678901:assumed-role/test/30a7fe7d714958787f6075c9904ce642&quot;
</span><span class="z-text z-plain">}
</span><span class="z-text z-plain">
</span></code></pre>
<br>
<h2 id="wrapping-up"><a class="header-anchor no-hover-padding" href="#wrapping-up" aria-label="Anchor link for: wrapping-up"><span class="link-icon" aria-hidden="true"></span></a>
Wrapping Up</h2>
<p>By integrating the SPIFFE Helper with IAM Roles Anywhere’s credential helper, we’ve removed the need for manual SVID renewals and AWS credential refreshes. This approach is especially useful for legacy applications that need certificates but can't natively support SPIFFE authentication.</p>
<p>A natural next step is deploying this setup on Kubernetes with the spiffe-helper and the rolesanywhere helper running as sidecars alongside another application. In a future post, we’ll walk through exactly that.</p>

        </section>

        
                
                
                    
                        
                        
                        
                    
                    
                        
                        
                        
                    
                
                
            <nav class="full-width article-navigation">
                <div><a href="https://misaac.me/blog/grant-aws-access-to-kubernetes-workloads-via-spiffe-spire-and-iam-roles-anywhere/" aria-label="Next" aria-describedby="left_title"><span class="arrow">←</span>&nbsp;Next</a>
                <p aria-hidden="true" id="left_title">Grant AWS Access to Kubernetes Workloads via SPIFFE&#x2F;SPIRE &amp; IAM Roles Anywhere</p></div>
                <div><a href="https://misaac.me/blog/connecting-github-codespaces-to-aws-vpn-via-spiffe-spire-and-iam-roles-anywhere/" aria-label="Prev" aria-describedby="right_title">Prev&nbsp;<span class="arrow">→</span></a>
                <p aria-hidden="true" id="right_title">Connecting GitHub Codespaces to AWS VPN via SPIFFE&#x2F;SPIRE &amp; IAM Roles Anywhere</p></div>
            </nav>
        
        

        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
        

    </article>
</main>

    <div id="button-container">
        
        
            <div id="toc-floating-container">
                <input type="checkbox" id="toc-toggle" class="toggle"/>
                <label for="toc-toggle" class="overlay"></label>
                <label for="toc-toggle" id="toc-button" class="button" title="Toggle Table of Contents">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg>
                </label>
                <div class="toc-content">
                    

<div class="toc-container">
    

    <ul>
        
            
            
                <li><a href="https://misaac.me/blog/automated-aws-credential-renewal-spiffe-helper-roles-anywhere/#set-up-the-aws-rolesanywhere-credential-helper">Set up the aws rolesanywhere credential helper</a>
                    
                </li>
            
        
            
            
                <li><a href="https://misaac.me/blog/automated-aws-credential-renewal-spiffe-helper-roles-anywhere/#set-up-spiffe-helper">Set up spiffe-helper</a>
                    
                </li>
            
        
            
            
                <li><a href="https://misaac.me/blog/automated-aws-credential-renewal-spiffe-helper-roles-anywhere/#profit">Profit</a>
                    
                </li>
            
        
            
            
                <li><a href="https://misaac.me/blog/automated-aws-credential-renewal-spiffe-helper-roles-anywhere/#wrapping-up">Wrapping Up</a>
                    
                </li>
            
        
    </ul>
</div>


                </div>
            </div>
        

        
        

        
        <a href="#" id="top-button" class="no-hover-padding" title="Go to the top of the page">
            <svg viewBox="0 0 20 20" fill="currentColor"><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg>
        </a>
    </div>


<span id="copy-success" class="hidden">
        Copied!
    </span>
    <span id="copy-init" class="hidden">
        Copy code to clipboard
    </span>
    <script defer src="https://misaac.me/js/copyCodeToClipboard.min.js"></script>
    </div>
    <footer>
    <section>
        <nav class="socials nav-navs">
        </nav>

        
        <nav class="nav-navs">
        </nav>

        <div class="credits">
            <small>
                
    
    
    
    
        
    
        
    

    

    
    
    

    
    
    <p><p>© 2025 Isaac M • Except where otherwise noted , content on this site is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> license.</p>
</p>

                </small>
        </div>
    </section>

    </footer>

</body>

</html>
